"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),r=require("prop-types"),t=require("styled-components");function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=n(e),a=n(r),l=n(t),u=function(){return u=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var o in r=arguments[t])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e},u.apply(this,arguments)};function i(e,r){return Object.defineProperty?Object.defineProperty(e,"raw",{value:r}):e.raw=r,e}var c,d,s=l.default.div(c||(c=i(["\n  display: flex;\n  align-items: center;\n"],["\n  display: flex;\n  align-items: center;\n"]))),f={type:"number",mask:!1,showState:!0,size:"md",autoFocus:!1,autoTab:!0,borderColor:"rgb(204,204,204)",errorBorderColor:"rgb(220,53,69)",focusBorderColor:"rgb(13,110,253)",validBorderColor:"rgb(25,135,84)",containerStyle:{},inputStyle:{},autoComplete:"off",placeholder:"o","aria-label":"Please enter pin code"},p=function(e){var r;return Array.isArray(e)?(r=new RegExp(e.join("|")).toString()).slice(1,r.length-1):"string"==typeof e?(r=new RegExp(e.split("").join("|")).toString()).slice(1,r.length-1):e instanceof RegExp?(r=e.toString()).slice(1,r.length-1):void 0},b=function(e){if(void 0===e)return null;var r=e.match(/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/);if(r)return{r:Number(r[1]),g:Number(r[2]),b:Number(r[3])};var t=/^#?[a-fA-Z\d]{3}$/i.test(e),n=t?/^#?([a-f\d])([a-f\d])([a-f\d])$/i.exec(e):/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?{r:parseInt(t?n[1]+n[1]:n[1],16),g:parseInt(t?n[2]+n[2]:n[2],16),b:parseInt(t?n[3]+n[3]:n[3],16)}:null},g=l.default.input(d||(d=i(["\n  width: ",";\n  height: ",";\n  margin-right: 0.375rem;\n  outline: transparent solid 2px;\n  outline-offset: 2px;\n  font-size: ",";\n  text-align: center;\n  border-radius: 0.375rem;\n  border-width: 1px;\n  border-style: solid;\n  border-color: ",";\n  background-color: inherit;\n  box-sizing: border-box;\n  &:focus {\n    border-color: ",";\n    box-shadow: "," 0px 0px 0px 1px;\n  }\n  &:last-child {\n    margin-right: 0;\n  }\n  ","\n  ","\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"],["\n  width: ",";\n  height: ",";\n  margin-right: 0.375rem;\n  outline: transparent solid 2px;\n  outline-offset: 2px;\n  font-size: ",";\n  text-align: center;\n  border-radius: 0.375rem;\n  border-width: 1px;\n  border-style: solid;\n  border-color: ",";\n  background-color: inherit;\n  box-sizing: border-box;\n  &:focus {\n    border-color: ",";\n    box-shadow: "," 0px 0px 0px 1px;\n  }\n  &:last-child {\n    margin-right: 0;\n  }\n  ","\n  ","\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"])),(function(e){switch(e.$sizing){case"xs":return"1.5rem";case"sm":return"2rem";case"md":return"2.5rem";case"lg":return"3rem"}}),(function(e){switch(e.$sizing){case"xs":return"1.5rem";case"sm":return"2rem";case"md":return"2.5rem";case"lg":return"3rem"}}),(function(e){switch(e.$sizing){case"xs":return"0.75rem";case"sm":return"0.875rem";case"md":return"1rem";case"lg":return"1.125rem"}}),(function(e){var r=e.$borderColor,t=b(r);return t?"rgb(".concat(t.r,",").concat(t.g,",").concat(t.b,")"):f.borderColor}),(function(e){var r=e.$focusBorderColor,t=b(r);return t?"rgb(".concat(t.r,",").concat(t.g,",").concat(t.b,")"):f.focusBorderColor}),(function(e){return e.$focusBorderColor}),(function(e){var r=e.$completed,t=e.$showState,n=e.$validBorderColor,o=b(n);return r&&t?"&:valid {\n    border-color: ".concat(o?"rgb(".concat(o.r,",").concat(o.g,",").concat(o.b,")"):f.validBorderColor,";\n    box-shadow: ").concat(o?"rgb(".concat(o.r,",").concat(o.g,",").concat(o.b,")"):f.validBorderColor," 0px 0px 0px 1px;\n    background-color: ").concat(o?"rgba(".concat(o.r,",").concat(o.g,",").concat(o.b,",0.1)"):f.validBorderColor.replace("rgb","rgba").replace(")",",0.1)"),";\n  }"):""}),(function(e){var r=e.$showState,t=e.$errorBorderColor,n=b(t);return r?"&:invalid {\n    border-color: ".concat(n?"rgb(".concat(n.r,",").concat(n.g,",").concat(n.b,")"):f.errorBorderColor,";\n    box-shadow: ").concat(n?"rgb(".concat(n.r,",").concat(n.g,",").concat(n.b,")"):f.errorBorderColor," 0px 0px 0px 1px;\n    background-color: ").concat(n?"rgba(".concat(n.r,",").concat(n.g,",").concat(n.b,",0.1)"):f.errorBorderColor.replace("rgb","rgba").replace(")",",0.1)"),";\n  }"):""})),m={index:a.default.number,values:a.default.arrayOf(a.default.string),onChange:a.default.func},y=function(r){var t=r.index,n=r.value,a=r.values,l=r.completed,u=r.type,i=r.mask,c=r.size,d=r.validate,s=r.format,f=r.showState,b=r.autoFocus,m=r.autoTab,y=r["aria-describedby"],h=r["aria-label"],v=r["aria-labelledby"],x=r.autoComplete,C=r.disabled,w=r.inputMode,O=r.id,S=r.name,B=r.placeholder,$=r.required,E=r.inputClassName,j=r.inputStyle,P=r.borderColor,z=r.errorBorderColor,T=r.focusBorderColor,k=r.validBorderColor,N=r.onChange,I=r.onBlur,F=r.onFocus,R=r.onKeyDown,q=e.useRef(),M=e.useMemo((function(){return p(d)}),[d]);return e.useEffect((function(){b&&0===t&&q.current.focus()}),[b,t]),o.default.createElement(g,{ref:q,type:i?"password":"text","aria-describedby":y,"aria-disabled":C,"aria-label":h,"aria-labelledby":v,"aria-required":$,autoComplete:x,disabled:C,name:S,id:O&&"".concat(O,"-").concat(t),className:E,inputMode:w||("number"===u?"numeric":"text"),required:$,placeholder:B,pattern:M,value:n,onChange:function(e){var r=a[t],n=e.target.value,o=function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e}([],a),l=function(e,r){return e?r.length>2?r.split(""):""===r?[]:e[0]===r[0]?[r[1]]:[r[0]]:r.split("")}(r,n).slice(0,o.length-t),i="number"===u?/(^$)|(\d+)/:/.*/,c=l.every((function(e){return i.test(e)}));if(N){var d=s?l.map((function(e){return s(e)})):l;if(d.length?d.forEach((function(e,r){return o[t+r]=e})):o[t]="",c){N(d,t,o);for(var f=q.current,p=0;p<d.length;p++)f=f.nextElementSibling;d&&m&&f instanceof HTMLInputElement&&f.focus()}}},onKeyDown:function(e){if("Backspace"===e.key&&m&&""===a[t]&&t>0){var r=q.current.previousElementSibling;r instanceof HTMLInputElement&&r.focus()}R&&R(e)},onFocus:function(e){e.target.placeholder="",F&&F(e)},onBlur:function(e){e.target.placeholder=B,I&&I(e)},$completed:l,$showState:f,$sizing:c,style:j,$borderColor:P,$errorBorderColor:z,$focusBorderColor:T,$validBorderColor:k,"data-index":t})};y.displayName="PinInputField",y.propTypes=m;var h={values:a.default.arrayOf(a.default.string).isRequired,type:a.default.oneOf(["number","text"]),mask:a.default.bool,validate:a.default.oneOfType([a.default.string,a.default.arrayOf(a.default.string),a.default.instanceOf(RegExp)]),format:a.default.func,showState:a.default.bool,size:a.default.oneOf(["xs","sm","md","lg"]),autoFocus:a.default.bool,autoTab:a.default.bool,containerClassName:a.default.string,containerStyle:a.default.object,inputClassName:a.default.string,inputStyle:a.default.object,onChange:a.default.func},v=function(r){var t=e.useMemo((function(){return r.values.every((function(e){return e}))}),[r.values]);return t&&r.onComplete&&(r.validate?r.values.every((function(e){return new RegExp(p(r.validate)).test(e)}))&&r.onComplete(r.values):r.onComplete(r.values)),o.default.createElement(s,{className:r.containerClassName,style:r.containerStyle},r.values.map((function(e,n){return o.default.createElement(y,u({key:r.id?"".concat(r.id,"-").concat(n):n,index:n,value:e,completed:t},r))})))};v.displayName="PinInput",v.propTypes=h,v.defaultProps=f;var x={length:a.default.number,initialValue:a.default.oneOfType([a.default.string,a.default.arrayOf(a.default.string)]),type:a.default.oneOf(["number","text"]),mask:a.default.bool,validate:a.default.oneOfType([a.default.string,a.default.arrayOf(a.default.string),a.default.instanceOf(RegExp)]),format:a.default.func,showState:a.default.bool,size:a.default.oneOf(["xs","sm","md","lg"]),autoFocus:a.default.bool,autoTab:a.default.bool,containerStyle:a.default.object,inputStyle:a.default.object,onChange:a.default.func},C=function(r){var t=r.length,n=r.initialValue,a=r.onChange,l=function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)r.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(t[n[o]]=e[n[o]])}return t}(r,["length","initialValue","onChange"]),i=e.useState(Array.from({length:t},(function(e,r){return n[r]||""}))),c=i[0],d=i[1];return o.default.createElement(v,u({values:c,onChange:function(e,r,t){d(t),a&&a(e,r,t)}},l))};C.displayName="StatefulPinInput",C.propTypes=x,C.defaultProps={length:4,initialValue:"",type:"number",mask:!1,showState:!0,size:"md",autoFocus:!1,autoTab:!0,containerStyle:{},inputStyle:{},autoComplete:"off",placeholder:"o","aria-label":"Please enter pin code"},exports.PinInput=v,exports.StatefulPinInput=C;
